# Organelle segmentation settings using Frangi filtering
# Each channel can have its own segmentation parameters
# Note: Pixel spacing (Z, Y, X) is automatically extracted from the zarr metadata

# Define channels to segment with their specific parameters
channels:
  # Example: Mitochondria channel
  mito:
    segment_kwargs:
      # Kernel size for CLAHE preprocessing (null = auto)
      clahe_kernel_size: null
      # Clipping limit for CLAHE (0.01-0.03 range recommended)
      clahe_clip_limit: 0.01
      # Range of sigma values for Frangi filter (min, max) in pixels
      sigma_range: [0.5, 3.0]
      # Number of sigma values to test
      sigma_steps: 5
      # Auto-optimize sigma (true) or use multi-scale (false)
      auto_optimize_sigma: false
      # Frangi filter sensitivity parameters
      frangi_alpha: 0.5
      frangi_beta: 0.5
      frangi_gamma: null
      # Thresholding method: 'otsu', 'triangle', 'nellie_min', 'nellie_max', 'percentile', 'manual_X'
      threshold_method: "otsu"
      # Minimum object size in pixels
      min_object_size: 10
      # Apply morphological closing
      apply_morphology: true

  # Example: ER channel with different parameters
  er:
    segment_kwargs:
      clahe_clip_limit: 0.02
      sigma_range: [1.0, 5.0]
      sigma_steps: 3
      auto_optimize_sigma: false
      threshold_method: "triangle"
      min_object_size: 20
      apply_morphology: false

  # Example: Lysosomes (typically smaller, rounder structures)
  lyso:
    segment_kwargs:
      sigma_range: [0.3, 2.0]
      threshold_method: "otsu"
      min_object_size: 5
      apply_morphology: true
